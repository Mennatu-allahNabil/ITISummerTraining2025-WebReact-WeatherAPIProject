<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.13.1/font/bootstrap-icons.min.css"
        integrity="sha512-t7Few9xlddEmgd3oKZQahkNI4dS6l80+eGEzFQiqtyVYdvcSG2D3Iub77R20BdotfRPA9caaRkg1tyaJiPmO0g=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="style.css">
    <title>Weather API Project</title>
</head>

<body>

    <div class="container">
        <div id="search-weather">
            <div>
                <span><i class="bi bi-search"></i></span>
                <input type="text" name="search-location" id="search-location" readonly>
                <span><i class="bi bi-x-circle-fill"></i></span>
            </div>
            <div></div>
            <div class="dropdown">
                <span id="gear-icon"><i class="bi bi-gear-fill"></i></span>
                <div class="dropdown-content" id="dropdown-menu" style="display: none;">
                    <div class="dropdown-item" id="temp-switch-btn"><i class="bi bi-thermometer"></i> Celsius</div>
                    <div class="dropdown-item" id="speed-switch-btn"><i class="bi bi-speedometer"></i> km/h</div>
                    <div class="dropdown-item" id="dark-switch-btn"><i class="bi bi-brightness-high"></i> Light</div>
                    <div class="dropdown-item"><i class="bi bi-geo-alt"></i> Locations</div>
                </div>
            </div>
        </div>
        <div id="current">

        </div>
        <div id="current-weather">

        </div>
        <div>
            <h2>This Week</h2>
            <div id="this-week-weather">

            </div>
        </div>

    </div>

    <script>
        const gearIcon = document.getElementById('gear-icon');
        const dropdownMenu = document.getElementById('dropdown-menu');
        const dropdownItems = document.querySelectorAll('.dropdown-item');

        gearIcon.addEventListener('click', function (e) {
            e.stopPropagation();
            dropdownMenu.style.display = dropdownMenu.style.display === 'block' ? 'none' : 'block';
        });

        dropdownItems.forEach(item => {
            item.addEventListener('click', function () {
                const value = this.getAttribute('data-value');
                console.log('Selected:', value);
                dropdownMenu.style.display = 'none';
            });
        });

        document.addEventListener('click', function () {
            dropdownMenu.style.display = 'none';
        });

        dropdownMenu.addEventListener('click', function (e) {
            e.stopPropagation();
        });
    </script>
    <script src="api_key.js"></script>
    <script src="script.js"></script>
    <script>
        let switchTheme = document.getElementById("dark-switch-btn");
        if (localStorage.getItem("theme") === "dark") {
            document.documentElement.classList.add("dark-theme");
            switchTheme.innerHTML = '<i class="bi bi-moon"></i> Dark Mode';
        } else {
            switchTheme.innerHTML = '<i class="bi bi-brightness-high"></i> Light Mode';
        }

        switchTheme.addEventListener("click", () => {
            document.documentElement.classList.toggle("dark-theme");
            if (document.documentElement.classList.contains("dark-theme")) {
                localStorage.setItem("theme", "dark");
                switchTheme.innerHTML = '<i class="bi bi-moon"></i> Dark Mode';

            } else {
                localStorage.setItem("theme", "light");
                switchTheme.innerHTML = '<i class="bi bi-brightness-high"></i> Light Mode';
            }
        });
    </script>
    <script>
        let switchSpeed = document.getElementById("speed-switch-btn");
        let kmh = document.getElementsByClassName("kmh");
        let mph = document.getElementsByClassName("mph");

        switchSpeed.addEventListener("click", () => {
            let isKmhVisible = window.getComputedStyle(kmh[0]).display !== "none";

            Array.from(kmh).forEach(element => {
                element.style.display = isKmhVisible ? "none" : "inline";
            });

            Array.from(mph).forEach(element => {
                element.style.display = isKmhVisible ? "inline" : "none";
            });

            switchSpeed.innerHTML = isKmhVisible ? '<i class="bi bi-speedometer"></i> mph' : '<i class="bi bi-speedometer"></i> km/h';
        });
    </script>
    <script>
        let switchTemp = document.getElementById("temp-switch-btn");
        let cel = document.getElementsByClassName("celsius");
        let fahr = document.getElementsByClassName("fahr");

        switchTemp.addEventListener("click", () => {
            let isCelVisible = window.getComputedStyle(cel[0]).display !== "none";

            Array.from(cel).forEach(element => {
                element.style.display = isCelVisible ? "none" : "inline";
            });

            Array.from(fahr).forEach(element => {
                element.style.display = isCelVisible ? "inline" : "none";
            });

            switchTemp.innerHTML = isCelVisible ? '<i class="bi bi-thermometer"></i> Celsius' : '<i class="bi bi-thermometer"></i> Fahrenheit';
        });
    </script>
</body>

</html>